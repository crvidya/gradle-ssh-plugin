+ssh-keygen -t rsa -N '' -C '' -f /home/travis/.ssh/id_rsa
Generating public/private rsa key pair.
Your identification has been saved in /home/travis/.ssh/id_rsa.
Your public key has been saved in /home/travis/.ssh/id_rsa.pub.
The key fingerprint is:
82:1b:e6:40:80:ae:7b:0f:28:46:9d:1e:ff:1c:52:22 
The key's randomart image is:
+--[ RSA 2048]----+
|o                |
|..               |
|. .              |
| o. ..           |
|...E+...S        |
|o..++oo.         |
|oo..oo .         |
|+ ..  + .        |
| . ..  o         |
+-----------------+
+ssh-keygen -t rsa -N pass_phrase -C '' -f /home/travis/.ssh/id_rsa_pass
Generating public/private rsa key pair.
Your identification has been saved in /home/travis/.ssh/id_rsa_pass.
Your public key has been saved in /home/travis/.ssh/id_rsa_pass.pub.
The key fingerprint is:
01:dc:dd:de:3a:ff:95:6a:d4:07:6d:cb:c6:85:10:da 
The key's randomart image is:
+--[ RSA 2048]----+
|     ... . ...   |
|      ... .oo    |
|        . ..Eo o |
|         .  . + +|
|        S    .+oo|
|            o. *o|
|            .o..o|
|             .o .|
|            .. ..|
+-----------------+
+tee -a /home/travis/.ssh/authorized_keys
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC+wGCvHSwLlWcRXzgM20paGO9yaDAE+KngcsKaKtK60F9Bf7iWABcOML8CjP5d19LTOdxPiXwO6wLI3RF9bqK+V8A3H9AmymbzukBwd3LNjQhx3WGKU7jJh6GR3hgJ5ZKwlBn0doMSyuHgmMRxukzEyxFsBHZVlRXCo0MvzKDy/WtH54r5LFC3S/Z9yuM0xhbg+P9SyvDiTNImAIDPHVrC75kPreoS1PTwwbjIdM79TRi8AZrTvxmZL1A2m9fE0X4Tgyh7933x+GkspHpFRYNm4j4KE9V40iLTbwXo6rGPeDtCE8T3arF2oNg1CRUij5rLWok4tG8RmjRmeBw9A4Jn 
+ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/home/travis/.ssh/known_hosts -o HashKnownHosts=no -o HostKeyAlgorithms=ssh-rsa -i /home/travis/.ssh/id_rsa localhost true
Warning: Permanently added 'localhost' (RSA) to the list of known hosts.
+grep localhost /home/travis/.ssh/known_hosts
localhost ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC6kxNhhvlpaHrew3TUpPz/asDQrBIhEnwzpRDbJJTsz6LuE8/muNbwmrRXIzWSFzMjAEhU3G7VndnUg4Q+0VEkuNnQDW7C+B6KKaOrFgEWU6vQVXk+RGEmJ74x4a9WG3uH394bTxAz2yjbRNph6Z4FbwnEg9SpiUbX13ij5TY8BW1trXiIb5pImCxvTZo3YIWwqpTPOPeQIJT7uYXSIIrXKl/UV0GptqDRkd3JTECy1cErhPnkSF9M3Eq+0/n8k1Ht10MTAdHCLhIG3qC/8FB0NHxxhKlEH77mKI8J5UMUMluymX1OGVw35Y+SMphd3YRTPQZSos1i51AMYyVxRtLN
+mkdir -p build/reports
+./gradlew -i -s -p acceptance-test test aggressiveTest
Starting Build
Settings evaluated using empty settings script.
Projects loaded. Root project using build file '/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build.gradle'.
Included projects: [root project 'acceptance-test']
Evaluating root project 'acceptance-test' using build file '/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build.gradle'.
Compiling build file '/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build.gradle' using StatementExtractingScriptTransformer.
Compiling build file '/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build.gradle' using BuildScriptTransformer.
Compiling script '/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/features.gradle' using StatementExtractingScriptTransformer.
Compiling script '/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/features.gradle' using BuildScriptTransformer.
Added feature: executing a command
Added feature: filter hosts by role
Added feature: executing commands sequentially
Added feature: each command should have independent environment
Added feature: executing a command with PTY allocation
Added feature: executing commands concurrently
Added feature: handling failure of the remote command
Added feature: handling failure of the remote command in background
Added feature: executing a privileged command by sudo (aggressive test because requires creating an user and setting up sudoers)
Added feature: executing a privileged command by sudo without password (aggressive test because requires creating an user and setting up sudoers)
Added feature: using remote specific identity (aggressive test because requires creating an user and setting up key pair)
Added feature: executing a shell
Added feature: sending files to the remote host and acquiring result files
All projects evaluated.
Selected primary tasks 'test', 'aggressiveTest'
Tasks to be executed: [task ':executeCommand', task ':executeCommandByRole', task ':executeCommandWithPty', task ':executeConcurrently', task ':executeSequentially', task ':executeShell', task ':failureStatus', task ':failureStatusInBackground', task ':setupBuildDir', task ':putAndGetFiles', task ':testEnvironmentOfCommand', task ':test', task ':createUserForSudoNoPassword', task ':executeSudoNoPassword', task ':deleteUserForSudoNoPassword', task ':createUserForSudoWithPassword', task ':executeSudoWithPassword', task ':deleteUserForSudoWithPassword', task ':createUserWithAuthorizedKey', task ':useRemoteSpecificIdentity', task ':deleteUserWithAuthorizedKey', task ':aggressiveTest']
:executeCommand (Thread[main,5,main]) started.
:executeCommand
Executing task ':executeCommand' (up-to-date check took 0.001 secs) due to:
  Task has not declared any outputs.
Execute a command (expr 8391 + 1730) with options ([:])
Channel #0 has been opened
10121
Channel #0 has been closed with exit status 0
:executeCommand (Thread[main,5,main]) completed. Took 1.216 secs.
:executeCommandByRole (Thread[main,5,main]) started.
:executeCommandByRole
Executing task ':executeCommandByRole' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (expr 8615 + 1272) with options ([:])
Channel #1 has been opened
9887
Channel #1 has been closed with exit status 0
:executeCommandByRole (Thread[main,5,main]) completed. Took 0.304 secs.
:executeCommandWithPty (Thread[main,5,main]) started.
:executeCommandWithPty
Executing task ':executeCommandWithPty' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (env | grep -v SSH_TTY) in background
Channel #2 has been opened
Execute a command (env | grep SSH_TTY) in background
SHELL=/bin/bash
XDG_SESSION_COOKIE=399ba1be7f4982914a3794ad000007da-1392542185.286656-1198548971
SSH_CLIENT=127.0.0.1 47856 22
LC_ALL=en_US.UTF-8
USER=travis
TRAVIS=true
MAIL=/var/mail/travis
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/home/travis
CONTINUOUS_INTEGRATION=true 
JAVA_HOME=/usr/lib/jvm/java-7-oracle
LANG=en_US.UTF-8
SHLVL=1
HOME=/home/travis
CI=true
LOGNAME=travis
LC_CTYPE=en_US.UTF-8
SSH_CONNECTION=127.0.0.1 47856 127.0.0.1 22
DEBIAN_FRONTEND=noninteractive
_=/usr/bin/env
Channel #3 has been opened
Execute a command (env | grep -v SSH_TTY) with options ([:])
Channel #4 has been opened
SSH_TTY=/dev/pts/1
SHELL=/bin/bash
XDG_SESSION_COOKIE=399ba1be7f4982914a3794ad000007da-1392542185.374825-1966101837
SSH_CLIENT=127.0.0.1 47857 22
LC_ALL=en_US.UTF-8
USER=travis
TRAVIS=true
MAIL=/var/mail/travis
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PWD=/home/travis
CONTINUOUS_INTEGRATION=true 
JAVA_HOME=/usr/lib/jvm/java-7-oracle
LANG=en_US.UTF-8
SHLVL=1
HOME=/home/travis
CI=true
LOGNAME=travis
LC_CTYPE=en_US.UTF-8
SSH_CONNECTION=127.0.0.1 47857 127.0.0.1 22
DEBIAN_FRONTEND=noninteractive
_=/usr/bin/env
Channel #4 has been closed with exit status 0
Execute a command (env | grep SSH_TTY) with options ([pty:true])
Channel #5 has been opened
SSH_TTY=/dev/pts/1
Channel #5 has been closed with exit status 0
Channel #2 has been closed with exit status 0
Channel #3 has been closed with exit status 0
:executeCommandWithPty (Thread[main,5,main]) completed. Took 0.762 secs.
:executeConcurrently (Thread[main,5,main]) started.
:executeConcurrently
Executing task ':executeConcurrently' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sleep 3 && date +%s > /tmp/data-8922) in background
Channel #6 has been opened
Execute a command (sleep 2 && date +%s > /tmp/data-1252) in background
Channel #7 has been opened
Execute a command (sleep 1 && date +%s > /tmp/data-5083) in background
Channel #8 has been opened
Execute a command (date +%s > /tmp/data-1783) in background
Channel #9 has been opened
Channel #9 has been closed with exit status 0
Channel #8 has been closed with exit status 0
Channel #7 has been closed with exit status 0
Channel #6 has been closed with exit status 0
Execute a command (cat /tmp/data-8922 && rm /tmp/data-8922) with options ([:])
Channel #10 has been opened
1392542189
Channel #10 has been closed with exit status 0
Execute a command (cat /tmp/data-1252 && rm /tmp/data-1252) with options ([:])
Channel #11 has been opened
1392542188
Channel #11 has been closed with exit status 0
Execute a command (cat /tmp/data-5083 && rm /tmp/data-5083) with options ([:])
Channel #12 has been opened
1392542187
Channel #12 has been closed with exit status 0
Execute a command (cat /tmp/data-1783 && rm /tmp/data-1783) with options ([:])
Channel #13 has been opened
1392542186
Channel #13 has been closed with exit status 0
:executeConcurrently (Thread[main,5,main]) completed. Took 4.236 secs.
:executeSequentially (Thread[main,5,main]) started.
:executeSequentially
Executing task ':executeSequentially' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (expr 8671 + 8975 > /tmp/data-7691) with options ([:])
Channel #14 has been opened
Channel #14 has been closed with exit status 0
Execute a command (expr 8671 + `cat /tmp/data-7691` > /tmp/data-6697) with options ([:])
Channel #15 has been opened
Channel #15 has been closed with exit status 0
Execute a command (cat /tmp/data-7691 && rm /tmp/data-7691) with options ([:])
Channel #16 has been opened
17646
Channel #16 has been closed with exit status 0
Execute a command (cat /tmp/data-6697 && rm /tmp/data-6697) with options ([:])
Channel #17 has been opened
26317
Channel #17 has been closed with exit status 0
:executeSequentially (Thread[main,5,main]) completed. Took 0.914 secs.
:executeShell (Thread[main,5,main]) started.
:executeShell
Executing task ':executeShell' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a shell with options ([:])
Channel #18 has been opened
Last login: Sun Feb 16 09:16:25 2014 from localhost.localdomain

travis@testing-worker-linux-5-1-31853-linux-17-18970606:~$ 
exit 0

logout
Channel #18 has been closed with exit status 0
:executeShell (Thread[main,5,main]) completed. Took 0.723 secs.
:failureStatus (Thread[main,5,main]) started.
:failureStatus
Executing task ':failureStatus' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (exit 1) with options ([:])
Channel #19 has been opened
Channel #19 has been closed with exit status 1
:failureStatus (Thread[main,5,main]) completed. Took 0.31 secs.
:failureStatusInBackground (Thread[main,5,main]) started.
:failureStatusInBackground
Executing task ':failureStatusInBackground' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (exit 1) in background
Channel #20 has been opened
Channel #20 has been closed with exit status 1
:failureStatusInBackground (Thread[main,5,main]) completed. Took 0.301 secs.
:setupBuildDir (Thread[main,5,main]) started.
:setupBuildDir
Executing task ':setupBuildDir' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
:setupBuildDir (Thread[main,5,main]) completed. Took 0.006 secs.
:putAndGetFiles (Thread[main,5,main]) started.
:putAndGetFiles
Executing task ':putAndGetFiles' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Put a local file (/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build/local-8995) to remote (/tmp/data-3949)
Channel #21 has been opened
Channel #21 has been closed with exit status -1
Put a local file (/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build/local-9747) to remote (/tmp/data-4632)
Channel #22 has been opened
Channel #22 has been closed with exit status -1
Execute a command (expr `cat /tmp/data-3949` + `cat /tmp/data-4632` > /tmp/data-8309) with options ([:])
Channel #23 has been opened
Channel #23 has been closed with exit status 0
Execute a command (expr `cat /tmp/data-3949` - `cat /tmp/data-4632` > /tmp/data-2080) with options ([:])
Channel #24 has been opened
Channel #24 has been closed with exit status 0
Get a remote file (/tmp/data-8309) to local (/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build/local-3268)
Channel #25 has been opened
Channel #25 has been closed with exit status -1
Get a remote file (/tmp/data-2080) to local (/home/travis/build/int128/gradle-ssh-plugin/acceptance-test/build/local-4900)
Channel #26 has been opened
Channel #26 has been closed with exit status -1
Execute a command (rm -v /tmp/data-3949 /tmp/data-4632 /tmp/data-8309 /tmp/data-2080) with options ([:])
Channel #27 has been opened
removed `/tmp/data-3949'
removed `/tmp/data-4632'
removed `/tmp/data-8309'
removed `/tmp/data-2080'
Channel #27 has been closed with exit status 0
:putAndGetFiles (Thread[main,5,main]) completed. Took 0.808 secs.
:testEnvironmentOfCommand (Thread[main,5,main]) started.
:testEnvironmentOfCommand
Executing task ':testEnvironmentOfCommand' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (export testdata=dummy) with options ([:])
Channel #28 has been opened
Channel #28 has been closed with exit status 0
Execute a command (echo "testdata is $testdata") with options ([:])
Channel #29 has been opened
testdata is 
Channel #29 has been closed with exit status 0
:testEnvironmentOfCommand (Thread[main,5,main]) completed. Took 0.501 secs.
:test (Thread[main,5,main]) started.
:test
Skipping task ':test' as it has no actions.
:test (Thread[main,5,main]) completed. Took 0.002 secs.
:createUserForSudoNoPassword (Thread[main,5,main]) started.
:createUserForSudoNoPassword
Executing task ':createUserForSudoNoPassword' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sudo useradd -m user3115n) with options ([:])
Channel #30 has been opened
Channel #30 has been closed with exit status 0
Execute a command (sudo passwd user3115n) with options ([:])
Channel #31 has been opened
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
Channel #31 has been closed with exit status 0
Execute a command (echo 'user3115n ALL=(ALL) NOPASSWD: ALL' > /tmp/user3115n) with options ([:])
Channel #32 has been opened
Channel #32 has been closed with exit status 0
Execute a command (sudo chmod 440 /tmp/user3115n) with options ([:])
Channel #33 has been opened
Channel #33 has been closed with exit status 0
Execute a command (sudo chown 0.0 /tmp/user3115n) with options ([:])
Channel #34 has been opened
Channel #34 has been closed with exit status 0
Execute a command (sudo mv /tmp/user3115n /etc/sudoers.d) with options ([:])
Channel #35 has been opened
Channel #35 has been closed with exit status 0
:createUserForSudoNoPassword (Thread[main,5,main]) completed. Took 1.314 secs.
:executeSudoNoPassword (Thread[main,5,main]) started.
:executeSudoNoPassword
Executing task ':executeSudoNoPassword' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (whoami) with sudo support and options ([pty:true])
Execute a command (sudo -S -p 'a5ae5a9f-d7b7-4308-a7f0-e6db7cd407e1' whoami) with options ([pty:true])
Channel #36 has been opened
root
Channel #36 has been closed with exit status 0
:executeSudoNoPassword (Thread[main,5,main]) completed. Took 0.29 secs.
:deleteUserForSudoNoPassword (Thread[main,5,main]) started.
:deleteUserForSudoNoPassword
Executing task ':deleteUserForSudoNoPassword' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sudo rm -v /etc/sudoers.d/user3115n) with options ([:])
Channel #37 has been opened
removed `/etc/sudoers.d/user3115n'
Channel #37 has been closed with exit status 0
Execute a command (sudo userdel -r user3115n) with options ([:])
Channel #38 has been opened
Channel #38 has been closed with exit status 0
:deleteUserForSudoNoPassword (Thread[main,5,main]) completed. Took 0.504 secs.
:createUserForSudoWithPassword (Thread[main,5,main]) started.
:createUserForSudoWithPassword
Executing task ':createUserForSudoWithPassword' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sudo useradd -m user4553p) with options ([:])
Channel #39 has been opened
Channel #39 has been closed with exit status 0
Execute a command (sudo passwd user4553p) with options ([:])
Channel #40 has been opened
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
Channel #40 has been closed with exit status 0
Execute a command (echo 'user4553p ALL=(ALL) ALL' > /tmp/user4553p) with options ([:])
Channel #41 has been opened
Channel #41 has been closed with exit status 0
Execute a command (sudo chmod 440 /tmp/user4553p) with options ([:])
Channel #42 has been opened
Channel #42 has been closed with exit status 0
Execute a command (sudo chown 0.0 /tmp/user4553p) with options ([:])
Channel #43 has been opened
Channel #43 has been closed with exit status 0
Execute a command (sudo mv /tmp/user4553p /etc/sudoers.d) with options ([:])
Channel #44 has been opened
Channel #44 has been closed with exit status 0
:createUserForSudoWithPassword (Thread[main,5,main]) completed. Took 1.309 secs.
:executeSudoWithPassword (Thread[main,5,main]) started.
:executeSudoWithPassword
Executing task ':executeSudoWithPassword' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (whoami) with sudo support and options ([pty:true])
Execute a command (sudo -S -p '60619577-8596-43e4-8605-e99f39f5e1e8' whoami) with options ([pty:true])
Channel #45 has been opened
Sending password for sudo authentication on channel #45
60619577-8596-43e4-8605-e99f39f5e1e8

root
Channel #45 has been closed with exit status 0
:executeSudoWithPassword (Thread[main,5,main]) completed. Took 0.262 secs.
:deleteUserForSudoWithPassword (Thread[main,5,main]) started.
:deleteUserForSudoWithPassword
Executing task ':deleteUserForSudoWithPassword' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sudo rm -v /etc/sudoers.d/user4553p) with options ([:])
Channel #46 has been opened
removed `/etc/sudoers.d/user4553p'
Channel #46 has been closed with exit status 0
Execute a command (sudo userdel -r user4553p) with options ([:])
Channel #47 has been opened
Channel #47 has been closed with exit status 0
:deleteUserForSudoWithPassword (Thread[main,5,main]) completed. Took 0.491 secs.
:createUserWithAuthorizedKey (Thread[main,5,main]) started.
:createUserWithAuthorizedKey
Executing task ':createUserWithAuthorizedKey' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sudo useradd -m user8006n) with options ([:])
Channel #48 has been opened
Channel #48 has been closed with exit status 0
Execute a command (sudo -u user8006n mkdir ~user8006n/.ssh) with options ([:])
Channel #49 has been opened
Channel #49 has been closed with exit status 0
Execute a command (sudo -u user8006n tee ~user8006n/.ssh/authorized_keys < ~/.ssh/id_rsa_pass.pub) with options ([:])
Channel #50 has been opened
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCh4Mha1TzBikdaZFgVRn+aa7vjOSFfWXgEBawhr/Rb+6udJGp0+8z+LR5D8a4RS4GKYMIZCByt8RjkhV2KT6htPVlFnqjvsFelX0U+wTvFHU6RwFgGw+kGyLZf4QZZyFTXCGQpxjpZ/ke7SqmWxatly3NqWLaR6HK0hvZOZ5hFfOFVREDRxB+o2nc8inpXn5enRVYMMkGFlrmacgdrzQg0cUL8vILKRDItd9fmpMbeWE8MD8KSMyNiEVR1kvhUKPiPBw6n33+g6aZZdjtGTKN035h3lNPplv//T359oEu2BXhL5f/dmttJPv4ODVEb2qx4k4HtPVV2x99TCl3SQVP5 
Channel #50 has been closed with exit status 0
:createUserWithAuthorizedKey (Thread[main,5,main]) completed. Took 0.696 secs.
:useRemoteSpecificIdentity (Thread[main,5,main]) started.
:useRemoteSpecificIdentity
Executing task ':useRemoteSpecificIdentity' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (whoami) with options ([:])
Channel #51 has been opened
user8006n
Channel #51 has been closed with exit status 0
:useRemoteSpecificIdentity (Thread[main,5,main]) completed. Took 0.291 secs.
:deleteUserWithAuthorizedKey (Thread[main,5,main]) started.
:deleteUserWithAuthorizedKey
Executing task ':deleteUserWithAuthorizedKey' (up-to-date check took 0.0 secs) due to:
  Task has not declared any outputs.
Execute a command (sudo userdel -r user8006n) with options ([:])
Channel #52 has been opened
Channel #52 has been closed with exit status 0
:deleteUserWithAuthorizedKey (Thread[main,5,main]) completed. Took 0.286 secs.
:aggressiveTest (Thread[main,5,main]) started.
:aggressiveTest
Skipping task ':aggressiveTest' as it has no actions.
:aggressiveTest (Thread[main,5,main]) completed. Took 0.001 secs.

BUILD SUCCESSFUL

Total time: 27.052 secs
